<!-- <h2>Welcome, User {{ username }}</h2> -->
<!-- <a href="/logout">Logout</a> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Figo Cell</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Jost:ital,wght@0,100..900;1,100..900&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet" />
    <!-- BS Icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

    <!-- My Css -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}" />

    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='favicon/favicon.png') }}" type="image/x-icon" />

    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  </head>
  <style>
    /* responsive ye */

    @media (min-width: 991.98px) {
      .card img {
        margin: 10px;
      }
    }
  </style>
  <body>
    <!-- Navbar -->
    <nav class="navbar fixed-top navbar-expand-lg text-white p-3 shadow navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#" style="letter-spacing: 3px"> <img width="100px" height="50px" src="{{ url_for('static', filename='logo/logoFigo.png') }}" alt="My Image" /></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas bg-dark offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasNavbarLabel"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body text-light">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item m-2" data-bs-dismiss="offcanvas" aria-label="Close">
                <a class="nav-link active" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item m-2" data-bs-dismiss="offcanvas" aria-label="Close">
                <a class="nav-link active" aria-current="page" href="/product">Produk</a>
              </li>
              <li class="nav-item m-2" data-bs-dismiss="offcanvas" aria-label="Close">
                <a class="nav-link active" aria-current="page" href="/contact">Kontak</a>
              </li>
              <li class="nav-item m-2" data-bs-dismiss="offcanvas" aria-label="Close">
                <a class="nav-link active" aria-current="page" href="/keranjang">Keranjang <i class="bi bi-cart-check"></i></a>
              </li>
              <li class="nav-item m-2" data-bs-dismiss="offcanvas" aria-label="Close">
                <a class="nav-link active" aria-current="page" href="/login">{{username}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->

    <!-- Content Start -->
    <section style="margin: 120px 0">
      <h1 class="text-center">Produk List</h1>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores magni ex laudantium? Repellendus sunt excepturi fuga maiores amet saepe, placeat consequuntur corrupti reiciendis quos rerum, similique vel, architecto dolor non!</p>
    </section>

    <!-- Content Start -->

    <div class="row justify-content-center m-2">
      <div class="col-md-4">
        <h2 class="mt-5 text-center">Pulsa</h2>
        <div class="card col-md-12">
          <p class="m-5 text-center">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus enim explicabo itaque repellat possimus assumenda qui, quisquam dolor facere voluptatem voluptas et beatae accusantium quae, veniam velit autem cupiditate
            hic rerum totam? Iste accusantium incidunt molestiae veritatis deserunt eaque pariatur obcaecati perspiciatis cum quisquam vel dolorem quas doloribus, possimus omnis.
          </p>
          <div class="btn btn-secondary" style="max-width: 10em; margin: 10px auto">Beli Pulsa</div>
        </div>
      </div>
      
    </div>
    <!-- Kontainer untuk produk -->
    <div class="container" id="produk-container"></div>
    <script>
      $(document).ready(function () {
        DaftarProdukbyJenis();
      });
      function DaftarProdukbyJenis() {
        // Request produk dari server
        $.ajax({
          url: '/produk',
          type: 'GET',
          success: function (response) {
            let produkContainer = $('#produk-container');
            produkContainer.empty();
            let produkByJenis = {};

            response.produk.forEach(function (produk) {
              if (!produkByJenis[produk.jenis]) {
                produkByJenis[produk.jenis] = [];
              }
              produkByJenis[produk.jenis].push(produk);
            });

            for (let jenis in produkByJenis) {
              let daftarProduk = `
                 
                        <div class="row">
                            <div class="col-md-12">
                                <h2 class="mt-5 text-center">${jenis}</h2>
                            </div>
                        </div>
                        <div class="row">
                    `;

              produkByJenis[jenis].forEach(function (produk) {
                daftarProduk += `
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="/${produk.file}" alt="${produk.nama}" class="img-fluid rounded  image-fluid" />
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title">${produk.nama}</h5>
                                                <p class="card-text">Stok: ${produk.stok}</p>
                                                <p class="card-text">Harga: Rp${produk.harga}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
              });

              daftarProduk += `</div>`;

              produkContainer.append(daftarProduk);
            }
          },
        });
      }
    </script>

    <!-- Content End -->

    <!-- Footer -->
    <footer class="p-4 bg-dark text-light">
      <div class="container">
        <div class="row ms-auto flex-sm-column flex-md-row">
          <div class="col mt-4">
            <a href="https://www.instagram.com/figocahyo_/"><i class="bi bi-instagram"></i></a>
            <a href="https://www.facebook.com/dimasdwi.figocahyo/"><i class="bi bi-facebook"></i></a>
            <a href="https://www.tiktok.com/@figox007"><i class="bi bi-tiktok"></i></a>
            <a href="https://wa.me/6288216733959"><i class="bi bi-whatsapp"></i></a>
            <a href="mailto:cahyodimas188@gmail.com"><i class="bi bi-envelope"></i></a>
          </div>
          <div class="col">
            <h2>Hubungi Kami</h2>
            <a href="" class="text-light" style="text-decoration: none"><i class="bi bi-telephone-fill"></i>+62818281828</a>
            <br /><a href=""><i class="bi bi-chat-left-fill"></i> </a>
          </div>
        </div>
        <hr />
        <p class="text-center">copyright@2024, Intel Celeron Team. All right reserved.</p>
      </div>
    </footer>

    <!-- My AOS -->
    <!-- <script src="{{ url_for('static', filename='script.js') }}"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>
